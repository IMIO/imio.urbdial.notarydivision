<metal:observation_macro define-macro="comments">
    <tal:comments repeat="comment view/get_comments">
        <tal:vars define="view python: view.get_view_of(comment)">

            <strong><span tal:content="view/display_title"></span></strong>

            <tal:actions content="structure comment/actions" /><br />

            <tal:text content="structure python: view.display_field('text')" />

            <tal:files content="structure python: view.display_field('files')" />

            <table>
                <tr>
                    <tal:addTypes content="structure view/display_add_types" />
                </tr>
                <tr><td><br /></td></tr>
                <tr>
                    <td width="10px"></td>
                    <td><metal:observation use-macro="here/@@comments_display/comments" /></td>
                </tr>
            </table>

        </tal:vars>
    </tal:comments>
</metal:observation_macro>
